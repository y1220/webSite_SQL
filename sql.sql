-- create an empty database. Name of the database: 
SET storage_engine=InnoDB;
SET FOREIGN_KEY_CHECKS=1;
CREATE DATABASE IF NOT EXISTS HW4;
use HW4;

-- drop tables if they already exist
DROP TABLE IF EXISTS APPEARANCE;
DROP TABLE IF EXISTS VIP;
DROP TABLE IF EXISTS TV_CHANNEL;

-- create tables
CREATE TABLE VIP (
	SSN CHAR(20) ,
	Name CHAR(50) NOT NULL ,
	Surname CHAR(50) NOT NULL ,
	Employment CHAR(20) NULL ,
	PRIMARY KEY (SSN)
);

CREATE TABLE TV_CHANNEL (
	CodC CHAR(10) ,
	Name CHAR(50) NOT NULL ,
	Broadcaster CHAR(50) NOT NULL ,
	Frequency SMALLINT NOT NULL,
	PRIMARY KEY (CodC)
);

CREATE TABLE APPEARANCE (
	SSN CHAR(20) NOT NULL ,
	Date DATE NOT NULL ,
	StartTime TIME NOT NULL ,
	EndTime TIME NOT NULL ,
	CodC CHAR(10) NOT NULL,
	PRIMARY KEY (SSN,Date,StartTime),
	FOREIGN KEY (SSN)
		REFERENCES VIP(SSN) 
		ON DELETE CASCADE
		ON UPDATE CASCADE,
	FOREIGN KEY (CodC)
		REFERENCES TV_CHANNEL(CodC) 
		ON DELETE CASCADE
		ON UPDATE CASCADE
);

-- Insert data
INSERT INTO VIP
VALUES ('AB0JH47N31B791Z','Andrea','Bocelli','Singer');
INSERT INTO VIP
VALUES ('BA04F5CBNDFHH4J','Bianca','Atzei','Singer');
INSERT INTO VIP
VALUES ('EM0D2F1JM0FG21H','Emma','Marrone','Singer');
INSERT INTO VIP
VALUES ('AS0MN2V1GH7775F','Annalisa','Scarrone','Singer');
INSERT INTO VIP
VALUES ('FC0FFG1244G8FFW','Federica','Carta','Singer');

INSERT INTO TV_CHANNEL
VALUES ('RA21','Rai 4','RAI ',10992);
INSERT INTO TV_CHANNEL
VALUES ('RA01','Rai 1','RAI ',11766);
INSERT INTO TV_CHANNEL
VALUES ('RA02','Rai 2','RAI ',11766);
INSERT INTO TV_CHANNEL
VALUES ('RA03','Rai 3','RAI ',11766);
INSERT INTO TV_CHANNEL
VALUES ('MS04','Rete 4','Mediaset',11432);
INSERT INTO TV_CHANNEL
VALUES ('MS30','La5','Mediaset',11919);
INSERT INTO TV_CHANNEL
VALUES ('MS66','Italia 2','Mediaset',11919);
INSERT INTO TV_CHANNEL
VALUES ('DI09','Nove','Discovery',10853);
INSERT INTO TV_CHANNEL
VALUES ('DI31','Real Time','Discovery',12207);

INSERT INTO APPEARANCE
VALUES ('AB0JH47N31B791Z','2019-04-20','10:00','11:00','RA21');
INSERT INTO APPEARANCE
VALUES ('AB0JH47N31B791Z','2019-05-05','14:00','16:00','MS30');
INSERT INTO APPEARANCE
VALUES ('AB0JH47N31B791Z','2019-05-11','16:00','17:00','RA01');
INSERT INTO APPEARANCE
VALUES ('AB0JH47N31B791Z','2019-05-13','16:00','16:30','RA02');
INSERT INTO APPEARANCE
VALUES ('AB0JH47N31B791Z','2019-02-19','22:30','23:30','RA03');
INSERT INTO APPEARANCE
VALUES ('AB0JH47N31B791Z','2019-03-03','08:00','09:30','RA21');

INSERT INTO APPEARANCE
VALUES ('BA04F5CBNDFHH4J','2019-02-21','11:00','12:30','DI09');
INSERT INTO APPEARANCE
VALUES ('BA04F5CBNDFHH4J','2019-03-14','09:00','10:45','RA21');
INSERT INTO APPEARANCE
VALUES ('BA04F5CBNDFHH4J','2019-04-20','14:00','14:30','DI09');
INSERT INTO APPEARANCE
VALUES ('BA04F5CBNDFHH4J','2019-01-11','19:00','20:45','MS04');
INSERT INTO APPEARANCE
VALUES ('BA04F5CBNDFHH4J','2019-03-02','21:00','22:15','DI31');
INSERT INTO APPEARANCE
VALUES ('BA04F5CBNDFHH4J','2019-01-14','07:00','07:45','RA03');
INSERT INTO APPEARANCE
VALUES ('BA04F5CBNDFHH4J','2019-04-08','11:00','11:45','DI31');
INSERT INTO APPEARANCE
VALUES ('BA04F5CBNDFHH4J','2019-08-25','16:00','16:45','RA02');

INSERT INTO APPEARANCE
VALUES ('EM0D2F1JM0FG21H','2019-05-02','18:00','22:00','MS30');
INSERT INTO APPEARANCE
VALUES ('EM0D2F1JM0FG21H','2019-01-01','21:00','22:00','DI09');
INSERT INTO APPEARANCE
VALUES ('EM0D2F1JM0FG21H','2019-05-04','10:00','12:00','MS66');
INSERT INTO APPEARANCE
VALUES ('EM0D2F1JM0FG21H','2019-01-09','11:00','13:30','DI31');
INSERT INTO APPEARANCE
VALUES ('EM0D2F1JM0FG21H','2019-02-12','12:00','13:00','MS30');
INSERT INTO APPEARANCE
VALUES ('EM0D2F1JM0FG21H','2019-03-23','09:00','10:00','DI31');
INSERT INTO APPEARANCE
VALUES ('EM0D2F1JM0FG21H','2019-03-05','07:00','08:30','MS30');
INSERT INTO APPEARANCE
VALUES ('EM0D2F1JM0FG21H','2019-03-30','14:00','15:00','RA01');

INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-01-11','19:00','21:45','MS30');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-01-12','23:00','23:45','RA21');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-01-11','22:00','23:00','MS30');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-01-12','21:00','22:30','RA21');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-01-06','14:00','15:30','MS04');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-02-09','13:00','13:45','RA21');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-02-10','19:00','21:45','MS04');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-02-24','18:00','19:00','RA01');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-03-11','18:00','19:00','MS66');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-04-29','19:00','20:15','RA01');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-04-13','23:00','23:30','MS66');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-04-27','10:00','10:30','RA02');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-05-17','09:00','09:30','MS30');
INSERT INTO APPEARANCE
VALUES ('AS0MN2V1GH7775F','2019-05-30','20:00','21:00','RA21');

INSERT INTO APPEARANCE
VALUES ('FC0FFG1244G8FFW','2019-02-27','22:00','23:30','RA21');
INSERT INTO APPEARANCE
VALUES ('FC0FFG1244G8FFW','2019-05-29','14:00','15:15','DI09');
INSERT INTO APPEARANCE
VALUES ('FC0FFG1244G8FFW','2019-04-18','23:00','23:30','RA01');
INSERT INTO APPEARANCE
VALUES ('FC0FFG1244G8FFW','2019-03-09','17:00','18:35','DI31');
INSERT INTO APPEARANCE
VALUES ('FC0FFG1244G8FFW','2019-05-11','12:00','13:30','RA03');
INSERT INTO APPEARANCE
VALUES ('FC0FFG1244G8FFW','2019-05-07','15:00','16:00','DI09');

